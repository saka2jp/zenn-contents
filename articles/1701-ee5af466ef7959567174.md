---
title: "ã€Railsã€‘form_forã®ä½¿ã„æ–¹"
emoji: "ğŸ’"
type: "tech"
topics: [Ruby, Rails]
published: true
published_at: 2017-01-24 10:53
---

# form_for ã¨ã¯

ãƒ¢ãƒ‡ãƒ«ã®æ–°è¦ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«å€¤ã‚’è¿½åŠ ã—ã¦ä¿å­˜ã—ãŸã„æ™‚ã«ä½¿ç”¨ã™ã‚‹ãƒ˜ãƒ«ãƒ‘ãƒ¼ãƒ¡ã‚½ãƒƒãƒ‰ã€‚
ãƒ•ã‚©ãƒ¼ãƒ ãŒç°¡å˜ã«ä½œæˆã§ãã€å…¥åŠ›ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã‚’ãƒ†ãƒ¼ãƒ–ãƒ«ã«ä¿å­˜ã§ãã‚‹ã€‚

# ãƒ•ã‚©ãƒ¼ãƒ ã®ä½œæˆ

ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®ãƒ•ã‚©ãƒ¼ãƒ ã‚’æƒ³å®šã€‚ ###ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã®å®Ÿè£…

```ruby:reviews_controller.rb
  def new
    @review = review.new
  end

  def create
    Review.create(create_params)
    render action: :new #è¡¨ç¤ºã—ãŸã„ãƒ“ãƒ¥ãƒ¼ã‚’è¡¨ç¤º
  end

  private
  def create_params
    params.require(:review).permit(:text)
  end
```

### ãƒ“ãƒ¥ãƒ¼ã®å®Ÿè£…

```ruby:new.html.haml
%h1 Review
  = form_for @review do |f|
    = f.label :text, "ãƒ¬ãƒ“ãƒ¥ãƒ¼"
    = f.text_field :text
    = f.submit "Send"
```

- ãƒ¢ãƒ‡ãƒ«ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’å¼•æ•°ã«æŒã¤ã€‚

-ã€€å¼•æ•°ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒä½•ã‚‚æƒ…å ±ã‚’æŒã£ã¦ã„ãªã‘ã‚Œã° create ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã€ã™ã§ã«æƒ…å ±ã‚’æŒã£ã¦ã„ã‚‹å ´åˆã¯ update ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã«è‡ªå‹•çš„ã«æŒ¯ã‚Šåˆ†ã‘ã‚‰ã‚Œã‚‹ã€‚

ãƒ•ã‚©ãƒ¼ãƒ ã«å…¥åŠ›ã•ã‚ŒãŸå€¤ã¯ã€submit ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ãŸç¬é–“ã«ãƒ¢ãƒ‡ãƒ«ã‚¯ãƒ©ã‚¹ã®æ–°è¦ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«ãã‚Œãã‚Œã®å±æ€§ã®å€¤ã¨ã—ã¦ã‚»ãƒƒãƒˆã•ã‚Œã€å¯¾å¿œã™ã‚‹ãƒ†ãƒ¼ãƒ–ãƒ«ã®ã‚«ãƒ©ãƒ ã«ä¿å­˜ã•ã‚Œã‚‹ã€‚

#ãƒã‚¹ãƒˆã‚’ã—ãŸå ´åˆ
groups ã¨ messages ãŒï¼‘å¯¾å¤šé–¢ä¿‚ã€‚
ãƒã‚¹ãƒˆã—ãŸå ´åˆã€å¼•æ•°ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã¯äºŒã¤ã«ãªã‚‹ã€‚

```ruby:config/routes.rb
resources :groups do
  resources :messages
end
```

```ruby:message/new.html.haml
= form_for [@group, @message] do |f|
...
```
